"use strict";(self.webpackChunk_soomy_soomy_electronic_auctions_web_site=self.webpackChunk_soomy_soomy_electronic_auctions_web_site||[]).push([[144],{72144:function(e,l,i){i.r(l);var s=i(72791),o=i(59434),d=i(16871),a=(i(83112),i(82056)),n=i(51299),t=i(45484),r=i(75985),c=(i(57496),i(39)),m=i(80184);l.default=function(e){var l,i,u,v,h,x,p,j,_,f,N,b,y,g,C,k,P,w,L,O=(0,o.I0)(),E=(0,d.s0)(),S=(0,o.v9)((function(e){return e.user})),M=S.userInfo,T=S.deconnectionLoading,A=S.connexionLoading;S.showModal;(0,s.useEffect)((function(){M||E("/")}),[E,M]);var R=(0,d.UO)().id,U=((0,o.v9)((function(e){return e.room})).Room,(0,o.v9)((function(e){return e.order}))),V=(U.NumberOfOrders,U.singleOrder);(0,o.v9)((function(e){return e.participation})).userParticipationList;return(0,s.useEffect)((function(){O((0,c.ME)(R))}),[O,R]),(0,m.jsx)("div",{className:"".concat(T||A?"d-flex justify-content-center align-items-center":"moving-main"),style:{height:"".concat(T||A?"100vh":null)},children:T||A?(0,m.jsx)("div",{className:"spinner-border",role:"status",children:(0,m.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"fluid-container",children:[(0,m.jsx)(r.Ix,{position:"top-center",autoClose:1e4,hideProgressBar:!1,newestOnTop:!1,toastStyle:{backgroundColor:"#303030",color:"white"},progressClassName:"Toastify__progress-bar--warning",closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,m.jsx)("div",{children:(0,m.jsxs)("main",{className:"pt-5",children:["pay\xe9"===(null===V||void 0===V?void 0:V.status_payment)?(0,m.jsxs)("h2",{className:"checkout-title  mx-auto text-center mb-5",style:{color:"rgb(2, 202, 2)",fontSize:"38px"},children:[(0,m.jsx)("i",{class:"fi fi-rr-shield-check"})," Commande Valid\xe9e"," "]}):(0,m.jsxs)("h2",{className:"checkout-title mx-auto text-center mb-5",style:{fontSize:"38px"},children:[" ","Commande en Attente"]}),(0,m.jsxs)("div",{className:"g-3 needs-validation container d-flex p-2 mb-2 mx-auto justify-content-between main-checkout",children:[(0,m.jsxs)("div",{className:"col-8 pe-lg-3 details-livraison-main",children:[(0,m.jsxs)("div",{className:"col-12 checkout-form details-livraison p-3 edge-shadow",children:[(0,m.jsx)("h3",{className:"text-left mt-0 mt-4",children:"Donn\xe9es de livraison"}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"mt-0",children:[(0,m.jsx)("label",{for:"validationCustom01",className:"form-label",children:"Nom :"}),(0,m.jsx)("p",{children:null===V||void 0===V||null===(l=V.user_id)||void 0===l?void 0:l.lastName})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"mt-0",children:[(0,m.jsx)("label",{for:"validationCustom01",className:"form-label",children:"Pr\xe9nom :"}),(0,m.jsx)("p",{children:null===V||void 0===V||null===(i=V.user_id)||void 0===i?void 0:i.firstName})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"mt-0",children:[(0,m.jsx)("label",{for:"validationCustom02",className:"form-label",children:"Email :"}),(0,m.jsx)("p",{children:null===V||void 0===V||null===(u=V.user_id)||void 0===u?void 0:u.email})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"mt-0",children:[(0,m.jsx)("label",{for:"validationCustom02",className:"form-label",children:"T\xe9l\xe9phone :"}),(0,m.jsx)("p",{children:null===V||void 0===V||null===(v=V.user_id)||void 0===v?void 0:v.phone})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"mt-0",children:[(0,m.jsx)("label",{for:"validationCustom03",className:"form-label",children:"Adresse :"}),(0,m.jsx)("p",{children:null===V||void 0===V?void 0:V.Adresse})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"mt-0",children:[(0,m.jsx)("label",{for:"validationCustom03",className:"form-label",children:"Ville :"}),(0,m.jsx)("p",{children:null===V||void 0===V?void 0:V.ville})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"mt-0",children:[(0,m.jsx)("label",{for:"validationCustom04",className:"form-label",children:"Code postal :"}),(0,m.jsx)("p",{children:null===V||void 0===V?void 0:V.zip})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"mt-0",children:[(0,m.jsx)("label",{for:"validationCustom04",className:"form-label",children:"Moyen de paiement :"}),(0,m.jsx)("p",{children:null===V||void 0===V?void 0:V.method_of_paiement})]})]}),(0,m.jsxs)("div",{className:"col-12 mt-2 checkout-form details-livraison p-3 edge-shadow",children:[(0,m.jsx)("h3",{className:"text-left mt-0 mb-4",children:"Paiement"}),(0,m.jsxs)("div",{className:"mt-2",children:[(0,m.jsx)("label",{className:"form-label",children:"Etat de Livraison :"}),(0,m.jsx)("div",{className:"alert alert-secondary py-1 pe-2 m-1",role:"alert",children:(0,m.jsx)("p",{className:"alert-link m-0",children:null===V||void 0===V?void 0:V.status_delivery})})]}),(0,m.jsxs)("div",{className:"mt-2",children:[(0,m.jsx)("label",{for:"validationCustom06",className:"form-label",children:"Etat de Paiement :"}),"pay\xe9"===(null===V||void 0===V?void 0:V.status_payment)?(0,m.jsx)("div",{className:"alert alert-success py-1 pe-2 m-1",role:"alert",children:(0,m.jsx)("p",{className:"alert-link m-0",children:"pay\xe9"})}):(0,m.jsx)("div",{className:"alert alert-secondary py-1 pe-2 m-1 ",role:"alert",children:(0,m.jsx)("p",{className:"alert-link m-0",children:null===V||void 0===V?void 0:V.status_payment})})]})]})]}),(0,m.jsxs)("div",{className:"col-4 d-flex flex-column align-items-center checkout-details px-sm-2 p-lg-3 px-md-3 edge-shadow",children:[(0,m.jsx)("h3",{className:"text-center mt-3",children:"Votre Commande"}),(0,m.jsx)("img",{className:"checkout-img edge-shadow",src:null===V||void 0===V||null===(h=V.room_id)||void 0===h||null===(x=h.product)||void 0===x||null===(p=x.image)||void 0===p?void 0:p.imageURL}),(0,m.jsx)("table",{className:"table w-100",children:(0,m.jsxs)("tbody",{className:"details-checkout-body",children:[(0,m.jsxs)("tr",{className:"table-light",children:[(0,m.jsx)("td",{children:"Produit"}),(0,m.jsx)("td",{className:"text-end",children:null===V||void 0===V||null===(j=V.room_id)||void 0===j||null===(_=j.product)||void 0===_?void 0:_.title})]}),(0,m.jsxs)("tr",{className:"table-light",children:[(0,m.jsx)("td",{children:"Garantie"}),(0,m.jsxs)("td",{className:"text-end",children:[null===V||void 0===V||null===(f=V.room_id)||void 0===f||null===(N=f.product)||void 0===N?void 0:N.garantie," Mois"]})]}),(0,m.jsxs)("tr",{className:"table-light",children:[(0,m.jsx)("td",{children:"Partenaire"}),(0,m.jsx)("td",{className:"text-end p-1",children:(0,m.jsx)("img",{className:"card-img-partner m-0",src:null===V||void 0===V||null===(b=V.room_id)||void 0===b||null===(y=b.product)||void 0===y||null===(g=y.partner)||void 0===g||null===(C=g.image)||void 0===C?void 0:C.imageURL})})]}),(0,m.jsxs)("tr",{className:"table-light",children:[(0,m.jsx)("td",{children:"Livraison"}),(0,m.jsx)("td",{className:"text-end",children:"---"})]})]})}),(0,m.jsx)("table",{className:"table total-table w-100",children:(0,m.jsxs)("tbody",{className:"total-body",children:[(0,m.jsxs)("tr",{className:"table-light total-tr mt-5",children:[(0,m.jsx)("td",{children:"Sous-total"}),(0,m.jsxs)("td",{className:"text-end",children:["soomy"===(null===V||void 0===V?void 0:V.typeWinner)?null===V||void 0===V||null===(k=V.room_id)||void 0===k?void 0:k.prixPromo:null===V||void 0===V||null===(P=V.room_id)||void 0===P?void 0:P.directPrice," ","dt"]})]}),(0,m.jsxs)("tr",{className:"table-light total-tr",children:[(0,m.jsx)("td",{children:"Total"}),(0,m.jsxs)("td",{className:"text-end",children:["soomy"===(null===V||void 0===V?void 0:V.typeWinner)?null===V||void 0===V||null===(w=V.room_id)||void 0===w?void 0:w.prixPromo:null===V||void 0===V||null===(L=V.room_id)||void 0===L?void 0:L.directPrice," ","td"]})]})]})}),!("pay\xe9"===(null===V||void 0===V?void 0:V.status_payment))&&V&&"carte bancaire"===V.method_of_paiement&&(0,m.jsx)("div",{className:"paypal-button w-100 mt-4",children:(0,m.jsx)(n.Vv,{options:{"client-id":"test"},children:(0,m.jsx)(n.ch,{createOrder:function(e,l){var i,s,o;return l.order.create({purchase_units:[{amount:{value:"soomy"===(null===V||void 0===V?void 0:V.typeWinner)?null===V||void 0===V||null===(i=V.room_id)||void 0===i?void 0:i.prixPromo.toString():null===V||void 0===V||null===(s=V.room_id)||void 0===s||null===(o=s.directPrice)||void 0===o?void 0:o.toString()}}]})},onApprove:function(e,l){return l.order.capture().then((function(e){var l,i,s,o=e.purchase_units[0].payments.captures;O((0,t._X)({type:"paiement",total:parseFloat(o[0].amount.value),user:null===V||void 0===V||null===(l=V.user_id)||void 0===l?void 0:l._id,service:e.purchase_units[0].soft_descriptor,montant:"soomy"===(null===V||void 0===V?void 0:V.typeWinner)?null===V||void 0===V||null===(i=V.room_id)||void 0===i?void 0:i.prixPromo:null===V||void 0===V||null===(s=V.room_id)||void 0===s?void 0:s.directPrice,status:o[0].status,ref:o[0].id})).then((function(e){O((0,c.Cs)({id:null===V||void 0===V?void 0:V._id,data:{status_payment:"pay\xe9",status_delivery:"en attente de livraison",payment_id:e.payload._id}}))})).then((function(){var e,l,i,s,o,d,a,n,t;O((0,c.hs)({email:null===M||void 0===M?void 0:M.email,room_id:null===V||void 0===V||null===(e=V.room_id)||void 0===e?void 0:e._id,ref:null===V||void 0===V?void 0:V.ref_order,name:null===V||void 0===V||null===(l=V.room_id)||void 0===l||null===(i=l.product)||void 0===i?void 0:i.title,method_of_paiement:null===V||void 0===V?void 0:V.method_of_paiement,status_payment:null===V||void 0===V?void 0:V.status_payment,prix:null===V||void 0===V||null===(s=V.room_id)||void 0===s||null===(o=s.product)||void 0===o?void 0:o.prix,prixPromo:null===V||void 0===V||null===(d=V.room_id)||void 0===d?void 0:d.prixPromo,image:null===V||void 0===V||null===(a=V.room_id)||void 0===a||null===(n=a.product)||void 0===n||null===(t=n.image)||void 0===t?void 0:t.imageURL,order_id:null===V||void 0===V?void 0:V._id})),O((0,c.ME)(R))})),setTransaction(!0)}))}})})})]})]})]})}),(0,m.jsx)(a.Z,{})]})," "]})})}}}]);
//# sourceMappingURL=144.e2a4bf91.chunk.js.map