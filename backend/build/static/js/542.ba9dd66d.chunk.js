"use strict";(self.webpackChunk_soomy_soomy_electronic_auctions_web_site=self.webpackChunk_soomy_soomy_electronic_auctions_web_site||[]).push([[542],{13542:function(e,i,n){n.r(i),n.d(i,{default:function(){return O}});var t=n(70885),r=n(1413),s=n(42982),o=n(74165),l=n(15861),a=n(72791),c=n(78983),d=n(22800),u=n(17540),v=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M462.541,316.3l-64.344-42.1,24.774-45.418A79.124,79.124,0,0,0,432.093,192V120A103.941,103.941,0,0,0,257.484,43.523L279.232,67a71.989,71.989,0,0,1,120.861,53v72a46.809,46.809,0,0,1-5.215,21.452L355.962,284.8l89.058,58.274a42.16,42.16,0,0,1,19.073,35.421V432h-72v32h104V378.494A74.061,74.061,0,0,0,462.541,316.3Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M318.541,348.3l-64.343-42.1,24.773-45.418A79.124,79.124,0,0,0,288.093,224V152A104.212,104.212,0,0,0,184.04,47.866C126.723,47.866,80.093,94.581,80.093,152v72a78,78,0,0,0,9.015,36.775l24.908,45.664L50.047,348.3A74.022,74.022,0,0,0,16.5,410.4L16,496H352.093V410.494A74.061,74.061,0,0,0,318.541,348.3ZM320.093,464H48.186l.31-53.506a42.158,42.158,0,0,1,19.073-35.421l88.682-58.029L117.2,245.452A46.838,46.838,0,0,1,112.093,224V152a72,72,0,1,1,144,0v72a46.809,46.809,0,0,1-5.215,21.452L211.962,316.8l89.058,58.274a42.16,42.16,0,0,1,19.073,35.421Z' class='ci-primary'/>"],h=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M32,16V496H480V16ZM448,304H342.111l-32,64H201.889l-32-64H64V144H448Zm0-256v64H64V48ZM64,464V336h86.111l32,64H329.889l32-64H448V464Z' class='ci-primary'/>"],p=n(24846),m=n(79041),f=n(58819),x=n(95316),g=n(74569),j=n.n(g),Z=n(8116),y=n(43360),N=n(59434),C=n(96806),P=n(57496),k=n(96580),E=n(21501),w=n(94162),L=n(2599),b=n(87462),V=n(63366),_=n(26752),H=n(74142),A=n(26780),S=n(57933),U=n(80184),I=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],T={entering:{transform:"none"},entered:{transform:"none"}},M=a.forwardRef((function(e,i){var n=(0,H.Z)(),t={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},r=e.addEndListener,s=e.appear,o=void 0===s||s,l=e.children,c=e.easing,d=e.in,u=e.onEnter,v=e.onEntered,h=e.onEntering,p=e.onExit,m=e.onExited,f=e.onExiting,x=e.style,g=e.timeout,j=void 0===g?t:g,Z=e.TransitionComponent,y=void 0===Z?_.ZP:Z,N=(0,V.Z)(e,I),C=a.useRef(null),P=(0,S.Z)(l.ref,i),k=(0,S.Z)(C,P),E=function(e){return function(i){if(e){var n=C.current;void 0===i?e(n):e(n,i)}}},w=E(h),L=E((function(e,i){(0,A.n)(e);var t=(0,A.C)({style:x,timeout:j,easing:c},{mode:"enter"});e.style.webkitTransition=n.transitions.create("transform",t),e.style.transition=n.transitions.create("transform",t),u&&u(e,i)})),M=E(v),R=E(f),z=E((function(e){var i=(0,A.C)({style:x,timeout:j,easing:c},{mode:"exit"});e.style.webkitTransition=n.transitions.create("transform",i),e.style.transition=n.transitions.create("transform",i),p&&p(e)})),F=E(m);return(0,U.jsx)(y,(0,b.Z)({appear:o,in:d,nodeRef:C,onEnter:L,onEntered:M,onEntering:w,onExit:z,onExited:F,onExiting:R,addEndListener:function(e){r&&r(C.current,e)},timeout:j},N,{children:function(e,i){return a.cloneElement(l,(0,b.Z)({style:(0,b.Z)({transform:"scale(0)",visibility:"exited"!==e||d?void 0:"hidden"},T[e],x,l.props.style),ref:k},i))}}))})),R=n(16871),z=n(36249);function F(e){var i=(0,N.I0)(),n=(0,N.v9)((function(e){return e.user})).userInfo;(0,a.useEffect)((function(){var n=function(){var n=(0,l.Z)((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i((0,C.qq)({id:e.userId}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[i,e.userId]);var t=(0,N.v9)((function(e){var i;return null===(i=e.purchase)||void 0===i?void 0:i.purchasedPacks})),u=(null===t||void 0===t?void 0:t.packPurchases)||[],v=(0,s.Z)(u).sort((function(e,i){return e.credit-i.credit})),h=(0,N.v9)((function(e){return e.purchase.updateLoading})),g=(0,N.v9)((function(e){return e.purchase.updateErrors}));return(0,U.jsxs)(x.Z,(0,r.Z)((0,r.Z)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,U.jsx)(x.Z.Header,{closeButton:!0,children:(0,U.jsx)(x.Z.Title,{id:"contained-modal-title-vcenter",children:"Liste des Packs"})}),(0,U.jsx)(x.Z.Body,{children:h?(0,U.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,U.jsx)(k.Z,{})}):g?(0,U.jsx)(w.Z,{sx:{width:"100%"},spacing:2,children:(0,U.jsx)(E.Z,{severity:"info",children:(0,U.jsx)("div",{style:{display:"flex",textAlign:"left"},children:g})})}):(0,U.jsxs)(c.Sx,{bordered:!0,striped:!0,hover:!0,responsive:!0,children:[(0,U.jsx)(c.V,{children:(0,U.jsxs)(c.T6,{children:[(0,U.jsx)(c.is,{children:"Pack image"}),(0,U.jsx)(c.is,{children:"Validit\xe9"}),(0,U.jsx)(c.is,{children:"Validit\xe9 restantes"}),(0,U.jsx)(c.is,{children:"Credit"}),(0,U.jsx)(c.is,{children:"Prix"}),(0,U.jsx)(c.is,{children:"Date d'achat"}),(0,U.jsx)(c.is,{children:"Disponiblilt\xe9"}),(0,U.jsx)(c.is,{children:"Action"})]})}),(0,U.jsx)(c.NR,{children:null===v||void 0===v?void 0:v.map((function(t,r){var s,o,l,a,u;return(0,U.jsxs)(c.T6,{children:[(0,U.jsx)(c.NN,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,U.jsx)(c.cU,{size:"md",src:null===t||void 0===t||null===(s=t.pack_id)||void 0===s||null===(o=s.image)||void 0===o?void 0:o.imageURL})}),(0,U.jsx)(c.NN,{children:null===t||void 0===t||null===(l=t.pack_id)||void 0===l?void 0:l.num_uses}),(0,U.jsx)(c.NN,{style:{color:0===(null===t||void 0===t?void 0:t.num_uses)?"red":"inherit"},children:null===t||void 0===t?void 0:t.num_uses}),(0,U.jsx)(c.NN,{children:null===t||void 0===t||null===(a=t.pack_id)||void 0===a?void 0:a.credit}),(0,U.jsx)(c.NN,{children:null===t||void 0===t||null===(u=t.pack_id)||void 0===u?void 0:u.prix}),(0,U.jsx)(c.NN,{children:(null===t||void 0===t?void 0:t.createdAt)&&new Date(t.createdAt).toISOString().replace("T",", ").substr(0,19)}),(0,U.jsx)(c.NN,{children:null!==t&&void 0!==t&&t.availability?(0,U.jsx)(p.Z,{icon:m._,size:"xl",style:{color:"#4ff549"}}):(0,U.jsx)(p.Z,{icon:f.E,size:"xl",style:{color:"red"}})}),(0,U.jsx)(c.NN,{children:(0,U.jsx)(L.Z,{title:"Supprimer pack",placement:"top",arrow:!0,TransitionComponent:M,children:(0,U.jsx)(p.Z,{className:"mx-2",icon:d.N,style:{cursor:"pointer"},onClick:function(){var r,s;window.confirm("Voulez-vous vraiment supprimer ce pack achet\xe9 ?")&&(r=null===t||void 0===t?void 0:t._id,s=null===t||void 0===t?void 0:t.credit,e.setLoader(!0),j().delete("/purchase/deletePurchase/".concat(r)).then((function(){return i((0,P.Zt)({type:"Pack Bitso ".concat(s," supprim\xe9"),user:n._id,service:"Pack supprim\xe9 par Admin",montant:s,status:"COMPLETED",ref:"-"}))})).then((function(){return i((0,C.qq)({id:e.userId}))})).then((function(i){e.setLoader(!1),e.setUsers(i.data)})))}})})})]},r)}))})]})}),(0,U.jsx)(x.Z.Footer,{children:(0,U.jsx)(y.Z,{onClick:e.onHide,children:"Fermer"})})]}))}var O=function(){var e,i=(0,a.useState)(),n=(0,t.Z)(i,2),o=n[0],l=n[1],m=(0,a.useState)(!1),f=(0,t.Z)(m,2),x=(f[0],f[1]),g=(0,a.useState)(!1),y=(0,t.Z)(g,2),N=y[0],C=y[1],P=(0,a.useState)(null),k=(0,t.Z)(P,2),E=k[0],w=k[1],b=(0,a.useState)(""),V=(0,t.Z)(b,2),_=V[0],H=V[1],A=(0,a.useState)("username"),S=(0,t.Z)(A,2),I=S[0],T=S[1],O=(0,R.TH)().pathname;(0,a.useEffect)((function(){x(!0),j().get("/users/getUsers/1").then((function(e){x(!1),l(e.data)}))}),[]);var B=function(e){var i=[];return e.split("/").reduce((function(e,n,t,r){var s="".concat(e,"/").concat(n),o=function(e,i){var n=i.find((function(i){return i.path===e}));return!!n&&n.name}(s,z.Z);return o&&i.push({pathname:s,name:o,active:t+1===r.length}),s})),i}(O);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(F,{show:N,onHide:function(){return C(!1)},userId:E,users:o,setLoader:x}),(0,U.jsx)(c.PO,{position:"sticky",className:"mb-4",children:(0,U.jsxs)(c.KB,{fluid:!0,children:[(0,U.jsxs)(c.fj,{className:"m-0 ms-2",children:[(0,U.jsx)(c.Sd,{href:"/",children:"Home"}),B.map((function(e,i){return(0,a.createElement)(c.Sd,(0,r.Z)((0,r.Z)({},e.active?{active:!0}:{href:e.pathname}),{},{key:i}),e.name)}))]}),(0,U.jsx)("div",{className:"d-flex",children:(0,U.jsxs)("div",{className:"dashboard-search mx-1",children:[(0,U.jsx)(p.Z,{icon:u.j,className:"mx-2"}),(0,U.jsx)("input",{placeholder:"Chercher...",value:_,onChange:function(e){return H(e.target.value)},onFocus:function(){dispatch(getAllOrders()).then((function(e){return setShowSearch(!0)}))},onBlur:function(){var e;dispatch(fetchOrderList({page:null===(e=orderList)||void 0===e?void 0:e.page})).then((function(e){return setShowSearch(!1)}))}}),(0,U.jsxs)("select",{onChange:function(e){return T(e.target.value)},value:I,children:[(0,U.jsx)("option",{value:"username",children:"Nom d'utilisateur"}),(0,U.jsx)("option",{value:"phone",children:"T\xe9l\xe9phone"}),(0,U.jsx)("option",{value:"email",children:"E-mail"})]})]})})]})}),(0,U.jsxs)(c.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,U.jsx)(c.V,{color:"light",children:(0,U.jsxs)(c.T6,{children:[(0,U.jsx)(c.is,{className:"text-center",children:(0,U.jsx)(p.Z,{icon:v})}),(0,U.jsx)(c.is,{children:"Nom & Pr\xe9nom"}),(0,U.jsx)(c.is,{children:"Nom d'utilisateur"}),(0,U.jsx)(c.is,{className:"text-center",children:"E-mail"}),(0,U.jsx)(c.is,{className:"text-center",children:"T\xe9lephone"}),(0,U.jsx)(c.is,{children:"Actions"})]})}),(0,U.jsx)(c.NR,{children:null===o||void 0===o||null===(e=o.users)||void 0===e?void 0:e.filter((function(e){var i,n,t,r,s,o;return"username"===I?null===e||void 0===e||null===(i=e.username)||void 0===i||null===(n=i.toLowerCase())||void 0===n?void 0:n.includes(_.toLowerCase()):"phone"===I?null===e||void 0===e||null===(t=e.phone)||void 0===t||null===(r=t.toLowerCase())||void 0===r?void 0:r.includes(_.toLowerCase()):"email"!==I||(null===e||void 0===e||null===(s=e.email)||void 0===s||null===(o=s.toLowerCase())||void 0===o?void 0:o.includes(_.toLowerCase()))})).map((function(e,i){var n,t;return(0,U.jsxs)(c.T6,{"v-for":"item in tableItems",children:[(0,U.jsx)(c.NN,{className:"text-center",children:(0,U.jsx)(c.cU,{size:"md",src:null===e||void 0===e||null===(n=e.profile_img)||void 0===n?void 0:n.imageURL})}),(0,U.jsxs)(c.NN,{children:[(0,U.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e||null===(t=e.lastName)||void 0===t?void 0:t.toUpperCase()]}),(0,U.jsx)("div",{className:"small text-medium-emphasis",children:(0,U.jsx)("span",{children:null!==e&&void 0!==e&&e.approved?"Verifi\xe9":"Non Verifi\xe9"})})]}),(0,U.jsx)(c.NN,{children:(0,U.jsx)("div",{children:null===e||void 0===e?void 0:e.username})}),(0,U.jsx)(c.NN,{className:"text-center",children:null===e||void 0===e?void 0:e.email}),(0,U.jsx)(c.NN,{className:"text-center",children:null!==e&&void 0!==e&&e.phone?null===e||void 0===e?void 0:e.phone:"-"}),(0,U.jsxs)(c.NN,{children:[(0,U.jsx)(L.Z,{title:"Supprimer user",placement:"top",arrow:!0,TransitionComponent:M,children:(0,U.jsx)(p.Z,{className:"mx-2",icon:d.N,style:{cursor:"pointer",color:"red"},onClick:function(){var i;window.confirm("\xcates-vous s\xfbr de vouloir SUPPRIMER cet utilisateur ?")&&(i=null===e||void 0===e?void 0:e._id,x(!0),j().delete("/users/deleteUser/".concat(i)).then((function(){return j().get("/users/getUsers/".concat(null===o||void 0===o?void 0:o.page))})).then((function(e){x(!1),l(e.data)})).catch((function(e){var i,n;x(!1),null!==(i=e.response)&&void 0!==i&&null!==(n=i.data)&&void 0!==n&&n.message?window.alert(e.response.data.message):window.alert("Une erreur s'est produite lors de la suppression de l'utilisateur.")})))}})}),(0,U.jsx)(L.Z,{title:"Voir les packs",placement:"top",arrow:!0,children:(0,U.jsx)(p.Z,{className:"mx-2",icon:h,style:{cursor:"pointer"},onClick:function(){w(null===e||void 0===e?void 0:e._id),C(!0)}})})]})]},i)}))})]}),(0,U.jsxs)(Z.Z,{children:[(0,U.jsx)(Z.Z.First,{onClick:function(){j().get("/users/getUsers/1").then((function(e){x(!1),l(e.data)}))}}),(0,U.jsx)(Z.Z.Prev,{onClick:function(){j().get("/users/getUsers/".concat(1===(null===o||void 0===o?void 0:o.page)?null===o||void 0===o?void 0:o.totalPages:(null===o||void 0===o?void 0:o.page)-1)).then((function(e){x(!1),l(e.data)}))}}),(0,U.jsx)(Z.Z.Item,{onClick:function(){j().get("/users/getUsers/1").then((function(e){x(!1),l(e.data)}))},active:1===(null===o||void 0===o?void 0:o.page),children:1}),(null===o||void 0===o?void 0:o.totalPages)>5&&(null===o||void 0===o?void 0:o.page)>3&&(0,U.jsx)(Z.Z.Ellipsis,{}),3===(null===o||void 0===o?void 0:o.totalPages)&&(0,U.jsx)(Z.Z.Item,{onClick:function(){j().get("/users/getUsers/2").then((function(e){x(!1),l(e.data)}))},active:2===(null===o||void 0===o?void 0:o.page),children:2}),(null===o||void 0===o?void 0:o.totalPages)>4&&(0,s.Z)(Array(3).keys()).map((function(e){return e+((null===o||void 0===o?void 0:o.page)===(null===o||void 0===o?void 0:o.totalPages)-2?(null===o||void 0===o?void 0:o.page)-2:(null===o||void 0===o?void 0:o.page)===(null===o||void 0===o?void 0:o.totalPages)-1?(null===o||void 0===o?void 0:o.page)-3:(null===o||void 0===o?void 0:o.page)===(null===o||void 0===o?void 0:o.totalPages)?(null===o||void 0===o?void 0:o.page)-4:1===(null===o||void 0===o?void 0:o.page)?null===o||void 0===o?void 0:o.page:2===(null===o||void 0===o?void 0:o.page)||3===(null===o||void 0===o?void 0:o.page)?1:(null===o||void 0===o?void 0:o.page)-2)})).map((function(e){return(0,U.jsx)(Z.Z.Item,{onClick:function(){j().get("/users/getUsers/".concat(e+1)).then((function(e){x(!1),l(e.data)}))},active:(null===o||void 0===o?void 0:o.page)===e+1,children:e+1})})),4===(null===o||void 0===o?void 0:o.totalPages)&&(0,s.Z)(Array(2).keys()).map((function(e){return e+1})).map((function(e){return(0,U.jsx)(Z.Z.Item,{onClick:function(){j().get("/users/getUsers/".concat(e+1)).then((function(e){x(!1),l(e.data)}))},active:(null===o||void 0===o?void 0:o.page)===e+1,children:e+1})})),(null===o||void 0===o?void 0:o.totalPages)>5&&(null===o||void 0===o?void 0:o.totalPages)-2>(null===o||void 0===o?void 0:o.page)&&(0,U.jsx)(Z.Z.Ellipsis,{}),(null===o||void 0===o?void 0:o.totalPages)>1&&(0,U.jsx)(Z.Z.Item,{onClick:function(){j().get("/users/getUsers/".concat(null===o||void 0===o?void 0:o.totalPages)).then((function(e){x(!1),l(e.data)}))},active:(null===o||void 0===o?void 0:o.totalPages)===(null===o||void 0===o?void 0:o.page),children:null===o||void 0===o?void 0:o.totalPages}),(0,U.jsx)(Z.Z.Next,{onClick:function(){j().get("/users/getUsers/".concat(o.page===(null===o||void 0===o?void 0:o.totalPages)?1:(null===o||void 0===o?void 0:o.page)+1)).then((function(e){x(!1),l(e.data)}))}}),(0,U.jsx)(Z.Z.Last,{onClick:function(){j().get("/users/getUsers/".concat(null===o||void 0===o?void 0:o.totalPages)).then((function(e){x(!1),l(e.data)}))}})]})]})}},58819:function(e,i,n){n.d(i,{E:function(){return t}});var t=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M425.706,86.294A240,240,0,0,0,86.294,425.705,240,240,0,0,0,425.706,86.294ZM256,48A207.1,207.1,0,0,1,391.528,98.345L98.345,391.528A207.1,207.1,0,0,1,48,256C48,141.309,141.309,48,256,48Zm0,416a207.084,207.084,0,0,1-134.986-49.887l293.1-293.1A207.084,207.084,0,0,1,464,256C464,370.691,370.691,464,256,464Z' class='ci-primary'/>"]},22800:function(e,i,n){n.d(i,{N:function(){return t}});var t=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"]},8116:function(e,i,n){n.d(i,{Z:function(){return C}});var t=n(1413),r=n(45987),s=n(81694),o=n.n(s),l=n(72791),a=n(10162),c=n(16445),d=n(80184),u=["active","disabled","className","style","activeLabel","children"],v=["children"],h=l.forwardRef((function(e,i){var n=e.active,s=e.disabled,l=e.className,a=e.style,v=e.activeLabel,h=e.children,p=(0,r.Z)(e,u),m=n||s?"span":c.Z;return(0,d.jsx)("li",{ref:i,style:a,className:o()(l,"page-item",{active:n,disabled:s}),children:(0,d.jsxs)(m,(0,t.Z)((0,t.Z)({className:"page-link",disabled:s},p),{},{children:[h,n&&v&&(0,d.jsx)("span",{className:"visually-hidden",children:v})]}))})}));h.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},h.displayName="PageItem";var p=h;function m(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=l.forwardRef((function(e,s){var o=e.children,l=(0,r.Z)(e,v);return(0,d.jsxs)(h,(0,t.Z)((0,t.Z)({},l),{},{ref:s,children:[(0,d.jsx)("span",{"aria-hidden":"true",children:o||i}),(0,d.jsx)("span",{className:"visually-hidden",children:n})]}))}));return s.displayName=e,s}var f=m("First","\xab"),x=m("Prev","\u2039","Previous"),g=m("Ellipsis","\u2026","More"),j=m("Next","\u203a"),Z=m("Last","\xbb"),y=["bsPrefix","className","size"],N=l.forwardRef((function(e,i){var n=e.bsPrefix,s=e.className,l=e.size,c=(0,r.Z)(e,y),u=(0,a.vE)(n,"pagination");return(0,d.jsx)("ul",(0,t.Z)((0,t.Z)({ref:i},c),{},{className:o()(s,u,l&&"".concat(u,"-").concat(l))}))}));N.displayName="Pagination";var C=Object.assign(N,{First:f,Prev:x,Ellipsis:g,Item:p,Next:j,Last:Z})}}]);
//# sourceMappingURL=542.ba9dd66d.chunk.js.map